<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Operation Snarkbrain</title>
<link rel="icon" href="favicon.ico" type="image/x-icon">
<style>
:root {
  --primary-color: #c300ff;
  --secondary-color: #2600ff;
  --background-color: #000;
  --box-background: rgba(17, 0, 40, 0.25);
  --box-border: 2px solid #c300ff;
  --box-shadow: 0 0 12px #2600ff33;
  --font-family: 'Courier New', monospace;
}

* {
  box-sizing: border-box;
}

body {
  background-color: var(--background-color);
  color: var(--primary-color);
  font-family: var(--font-family);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  text-align: center;
  margin: 0;
  padding: 15px;
  overflow-x: hidden;
  position: relative;
}

.background-grid {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    linear-gradient(rgba(195, 0, 255, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(195, 0, 255, 0.1) 1px, transparent 1px);
  background-size: 50px 50px;
  z-index: -2;
  opacity: 0.3;
}

.pulse-dot {
  position: fixed;
  width: 6px;
  height: 6px;
  background-color: var(--primary-color);
  border-radius: 50%;
  box-shadow: 0 0 10px 2px var(--primary-color);
  z-index: -1;
  animation: pulse 3s infinite ease-in-out;
}

@keyframes pulse {
  0%, 100% { opacity: 0.3; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.2); }
}

h1 {
  font-size: clamp(1.3em, 7vw, 2.2em);
  text-shadow: 0 0 6px var(--primary-color);
  margin-bottom: 8px;
  letter-spacing: 1px;
  word-break: normal;
  overflow-wrap: normal;
  padding: 0 10px;
  box-sizing: border-box;
  max-width: 100%;
  white-space: nowrap;
}

.scanline {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  background: repeating-linear-gradient(
    to bottom,
    rgba(0, 153, 255, 0.1) 0px,
    rgba(174, 0, 255, 0.1) 1px,
    rgba(0,255,150,0.02) 2px
  );
  animation: flicker 1.5s infinite, scan 8s linear infinite;
  z-index: -1;
}

@keyframes flicker {
  0%, 100% { opacity: 0.95; }
  50% { opacity: 1; }
}

@keyframes scan {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100%); }
}

.week-btn {
  display: block;
  margin: 15px auto;
  padding: 15px 25px;
  width: min(250px, 90%);
  font-size: 1em;
  border: var(--box-border);
  border-radius: 10px;
  background-color: transparent;
  color: var(--primary-color);
  cursor: pointer;
  transition: all 0.3s ease;
  touch-action: manipulation;
  position: relative;
  overflow: hidden;
}

.week-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(195, 0, 255, 0.4), transparent);
  transition: left 0.5s;
}

.week-btn:hover:not(.disabled)::before {
  left: 100%;
}

.week-btn:hover:not(.disabled) {
  background-color: var(--primary-color);
  color: #0a001a;
  box-shadow: 0 0 15px var(--primary-color);
  transform: translateY(-2px);
}

.week-btn.disabled {
  color: #555;
  border-color: #555;
  cursor: not-allowed;
  background-color: transparent;
}

.mission-box {
  background: var(--box-background);
  border: var(--box-border);
  border-radius: 10px;
  padding: 20px;
  width: min(90%, 800px);
  box-shadow: var(--box-shadow);
  margin: 10px 0;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.mission-box::after {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    to bottom right,
    rgba(195, 0, 255, 0) 0%,
    rgba(195, 0, 255, 0.1) 50%,
    rgba(195, 0, 255, 0) 100%
  );
  transform: rotate(30deg);
  animation: shimmer 8s infinite linear;
  pointer-events: none;
}

@keyframes shimmer {
  0% { transform: translateX(-100%) translateY(-100%) rotate(30deg); }
  100% { transform: translateX(100%) translateY(100%) rotate(30deg); }
}

.options {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-top: 25px;
}

@media (min-width: 768px) {
  .options {
    flex-direction: row;
    justify-content: space-between;
  }
}

button {
  background-color: transparent;
  border: var(--box-border);
  color: var(--primary-color);
  padding: 15px;
  font-size: 1em;
  border-radius: 10px;
  width: 100%;
  cursor: pointer;
  transition: all 0.3s ease;
  touch-action: manipulation;
  min-height: 50px;
  position: relative;
  overflow: hidden;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

button::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 5px;
  height: 5px;
  background: rgba(255, 255, 255, 0.5);
  opacity: 0;
  border-radius: 100%;
  transform: scale(1, 1) translate(-50%);
  transform-origin: 50% 50%;
}

button:focus:not(:active)::after {
  animation: ripple 1s ease-out;
}

@keyframes ripple {
  0% {
    transform: scale(0, 0);
    opacity: 0.5;
  }
  100% {
    transform: scale(20, 20);
    opacity: 0;
  }
}

@media (min-width: 768px) {
  button {
    width: 45%;
  }
}

@media (max-width: 768px) {
  button:active {
    background-color: transparent !important;
    color: var(--primary-color) !important;
    box-shadow: none !important;
    transform: none !important;
  }
}

button.user-choice {
  background-color: var(--primary-color);
  color: #0a001a;
  box-shadow: 0 0 15px var(--primary-color);
}

button.correct-answer {
  border: 2px solid #00ffae;
  box-shadow: 0 0 10px #00ffae;
}

button.user-choice.correct-answer {
  background-color: var(--primary-color);
  color: #0a001a;
  border: 2px solid #00ffae;
  box-shadow: 0 0 15px var(--primary-color), 0 0 10px #00ffae;
}

button:hover {
  background-color: var(--primary-color);
  color: #0a001a;
  box-shadow: 0 0 15px var(--primary-color);
  transform: translateY(-2px);
}

#feedback {
  margin-top: 20px;
  font-size: clamp(1em, 4vw, 1.3em);
  font-weight: bold;
  text-shadow: 0 0 5px var(--primary-color);
  word-break: break-word;
  transition: all 0.5s ease;
}

#next, #openLink {
  display: block;
  margin: 20px auto;
  padding: 12px 20px;
  width: min(200px, 90%);
  background-color: var(--primary-color);
  color: #0a001a;
  border: none;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  text-align: center;
  touch-action: manipulation;
  transition: all 0.3s ease;
}

#next:hover, #openLink:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(195, 0, 255, 0.4);
}

#score {
  margin-top: 10px;
  font-size: 1em;
  opacity: 0.8;
  transition: all 0.5s ease;
}

#homePage.mission-box {
  width: min(95%, 900px);
}

#intro, #homeTitle {
  max-width: min(90%, 700px);
  margin-bottom: 20px;
  font-size: clamp(0.85em, 2.8vw, 0.95em);
  opacity: 0.8;
  white-space: pre-line;
  word-break: normal;
  overflow-wrap: break-word;
}

#homeTitle {
  text-align: center;
  margin: 0 auto;
  white-space: normal;
  word-break: normal;
  overflow-wrap: break-word;
  line-height: 1.4;
  font-size: clamp(0.9em, 3vw, 1em);
  max-width: 90%;
}

#homeTitle br {
  display: block;
  content: "";
  margin-top: 0;
}

#snarkTitle {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  font-size: clamp(1.3em, 7vw, 2.2em);
  flex-wrap: wrap;
  margin-bottom: 15px;
  animation: title-glow 3s infinite alternate;
  padding: 0 10px;
  box-sizing: border-box;
  max-width: 100%;
  text-align: center;
  white-space: nowrap;
}

@keyframes title-glow {
  0% { text-shadow: 0 0 5px var(--primary-color); }
  100% { text-shadow: 0 0 15px var(--primary-color), 0 0 20px var(--primary-color); }
}

@media (max-width: 480px) {
  h1, #snarkTitle {
    white-space: normal;
    font-size: clamp(1.2em, 6.5vw, 1.8em);
    letter-spacing: 0.5px;
  }
}

@media (max-width: 360px) {
  h1, #snarkTitle {
    font-size: clamp(1.1em, 6vw, 1.6em);
  }
}

#homeIcon {
  opacity: 0;
  margin-right: 10px;
  display: inline-block;
  cursor: pointer;
  transition: all 0.3s ease;
  text-decoration: none;
  cursor: pointer;
  font-size: 1em;
  vertical-align: middle;
  margin-right: 15px;
  animation: fadeInButtons 1s ease forwards;
  animation-delay: 500ms;
}

#homeIcon img:hover {
  transform: scale(1.1);
}

#homeIcon img {
  width: 70px;
  height: 70px;
  object-fit: contain;
  display: block;
  transition: all 0.3s ease;
}

#siteFooter {
  position: sticky;
  top: 100vh;
  text-align: center;
  font-size: clamp(0.8em, 2.5vw, 0.9em);
  color: var(--primary-color);
  font-family: var(--font-family);
  margin-top: 30px;
  padding: 15px 10px;
  z-index: 1;
}

#siteFooter a{
  color: var(--primary-color);
  text-decoration: none;
  transition: all 0.3s ease;
}

#comment{
  font-weight: bold;
}

#comment a{
  font-style: italic;
  color: var(--primary-color);
  text-shadow: 0 0 5px var(--primary-color);
  text-decoration: underline;
  transition: all 0.3s ease;
}

#comment a:hover {
  text-decoration: none;
  color: pink;
  font-size: 110%;
}

#siteFooter a:hover {
  text-decoration: underline;
  text-shadow: 0 0 5px var(--primary-color);
}

.hidden { 
  display: none; 
}

.typewriter span {
  border-right: 2px solid var(--primary-color);
  animation: blink 0.8s step-end infinite;
}

.typewriter span {
  display: inline-block;
  overflow: hidden;
  white-space: nowrap;
  border-right: 2px solid;
  width: 0;
  animation:
    typing 0.5s steps(20, end) forwards,
    blink 0.6s step-end infinite alternate;
}

.homeButtons {
  opacity: 0;
  transform: translateY(10px);
  pointer-events: none;
  animation: fadeInButtons 1s ease forwards;
  animation-delay: 500ms;
  width: min(250px, 90%);
  margin: 10px auto;
}

@keyframes fadeInButtons {
  to {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }
}

@keyframes typing {
  from { width: 0; }
  to { width: 100%; }
}

@keyframes blink {
  50% { border-color: transparent; }
}

button:focus {
  outline: none;
}

@media (max-width: 480px) {
  button, .week-btn {
    padding: 18px 15px;
    min-height: 60px;
  }
  
  .mission-box {
    padding: 15px;
  }
}

.success-animation {
  animation: success-pulse 0.5s ease;
}

@keyframes success-pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

.failure-animation {
  animation: shake 0.5s ease;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

.page-transition {
  animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.score-change {
  animation: score-pop 0.5s ease;
}

@keyframes score-pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.nav-arrow {
  position: absolute;
  top: 20px;
  width: 40px;
  height: 40px;
  background-color: transparent;
  border: var(--box-border);
  border-radius: 50%;
  color: var(--primary-color);
  font-size: 24px;
  font-weight: bold;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  z-index: 10;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.nav-arrow:hover {
  background-color: var(--primary-color);
  color: #0a001a;
  box-shadow: 0 0 15px var(--primary-color);
}

.nav-arrow.hidden {
  display: none;
}

.nav-arrow.left {
  left: 20px;
}

.help-btn {
  position: absolute;
  top: 20px;
  right: 20px;
  width: 40px;
  height: 40px;
  background-color: transparent;
  border: var(--box-border);
  border-radius: 50%;
  color: var(--primary-color);
  font-size: 24px;
  font-weight: bold;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  z-index: 10;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.help-btn:hover {
  background-color: var(--primary-color);
  color: #0a001a;
  box-shadow: 0 0 15px var(--primary-color);
}

.help-tooltip {
  position: fixed;
  top: 70px;
  right: 20px;
  width: min(90%, 400px);
  background: rgba(17, 0, 40, 0.95);
  border: var(--box-border);
  border-radius: 10px;
  padding: 20px;
  box-shadow: var(--box-shadow);
  z-index: 100;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
  text-align: left;
  font-size: 0.9em;
  line-height: 1.5;
  max-height: 80vh;
  overflow-y: auto;
}

.help-btn:hover + .help-tooltip,
.help-tooltip:hover {
  opacity: 1;
  visibility: visible;
}

.help-tooltip h3 {
  margin-top: 0;
  color: var(--primary-color);
  text-shadow: 0 0 5px var(--primary-color);
  font-size: 1.2em;
  border-bottom: 1px solid var(--primary-color);
  padding-bottom: 10px;
}

.help-tooltip ul {
  padding-left: 20px;
  margin-bottom: 0;
}

.help-tooltip li {
  margin-bottom: 10px;
}

#finalOptions.hidden {
  display: none !important;
}

@media (max-width: 768px) {
  .nav-arrow, .help-btn {
    width: 35px;
    height: 35px;
    font-size: 20px;
    top: 15px;
  }
  
  .nav-arrow.left {
    left: 15px;
  }
  
  .help-btn {
    right: 15px;
  }
  
  .help-tooltip {
    top: 60px;
    right: 15px;
  }
}

@media (max-width: 480px) {
  .nav-arrow, .help-btn {
    width: 30px;
    height: 30px;
    font-size: 18px;
    top: 12px;
  }
  
  .nav-arrow.left {
    left: 12px;
  }
  
  .help-btn {
    right: 12px;
  }
  
  .help-tooltip {
    top: 55px;
    right: 12px;
    width: calc(100% - 24px);
  }
}

@media (min-width: 1024px) {
  .mission-box {
    width: min(95%, 1000px);
    padding: 30px;
  }
  
  button {
    padding: 20px;
    font-size: 1.1em;
    min-height: 70px;
  }
  
  #mission-title {
    font-size: 1.8em;
    margin-bottom: 25px;
  }
  
  .options {
    gap: 20px;
    margin-top: 30px;
  }
  
  #feedback {
    font-size: 1.4em;
    margin-top: 25px;
  }
  
  #comment {
    font-size: 1.1em;
    line-height: 1.5;
  }
  
  #next, #openLink {
    padding: 15px 25px;
    font-size: 1.1em;
    width: min(220px, 90%);
  }
  
  .week-btn {
    padding: 18px 30px;
    font-size: 1.1em;
    width: min(280px, 90%);
  }
  
  #homeTitle {
    font-size: 1.2em;
    line-height: 1.6;
  }
}

@media (min-width: 1200px) {
  .mission-box {
    width: min(95%, 1100px);
    padding: 35px;
  }
  
  button {
    padding: 22px;
    font-size: 1.15em;
    min-height: 75px;
  }
  
  #mission-title {
    font-size: 2em;
  }
}

@media (min-width: 768px) and (max-width: 1023px) {
  .mission-box {
    width: min(92%, 850px);
    padding: 25px;
  }
  
  button {
    padding: 18px;
    font-size: 1.05em;
    min-height: 65px;
  }
  
  #mission-title {
    font-size: 1.6em;
  }
}

@media (max-width: 768px) {
  #finalOptions:not(.hidden) {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-top: 20px;
  }
  
  #finalOptions:not(.hidden) button {
    width: 100%;
    margin: 0;
  }
}

@media (max-width: 480px) {
  #finalOptions {
    gap: 12px;
  }
}
</style>
</head>
<body>

<div class="background-grid"></div>
<div class="scanline"></div>

<a href="#" id="homeIcon" title="Go to Home">
  <img src="favicon.ico" alt="Home" />
</a>

<h1 class="typewriter" id="snarkTitle">
    <span>OPERATION SNARKBRAIN</span>
</h1>

<div id="homePage" class="mission-box page-transition">
    <h1 id="homeTitle"></h1>
    <div style="margin-top: 30px;">
      <button id="startGameBtn" class="homeButtons">Play</button>
      <button id="externalLinkBtn" class="homeButtons">Watch Gameplay</button>
    </div>
</div>

<div class="mission-box hidden page-transition" id="weekSelection">
    <h2>Select Week</h2>
    <div id="week-options">
      <button class="week-btn" data-week="1">Week #001</button>
      <button class="week-btn disabled" title="Coming Soon" disabled>Week #002</button>
    </div>
  </div>

<div id="intro" class="hidden"></div>

<div class="mission-box hidden page-transition" id="gameBox">
  <div class="nav-arrow left hidden" id="prevArrow">â€¹</div>
  <div class="help-btn" title="How to Play">?</div>
  <div class="help-tooltip">
    <h3>HOW TO PLAY</h3>
    <ul>
      <li>Your mission is to identify the authentic post from two options.</li>
      <li>One is real, one is a decoy. Select carefully.</li>
      <li>After selecting, you'll see if you were correct.</li>
      <li>Use the "Open File" button to view the original post.</li>
      <li>Complete all missions to finish the operation.</li>
      <li>Your score is based on correct identifications.</li>
      <li>Press the "Brain Icon" to return to the "Home Page".</li>
    </ul>
  </div>
  
  <h2 id="mission-title">Mission 1</h2>
  <div class="options">
    <button id="optionA"></button>
    <button id="optionB"></button>
  </div>
  <div id="feedback"></div>
  <button id="openLink" target="_blank">Open File</button>
  <p id="comment"></p>
  <button id="next">Next Mission</button>
  <div id="score"></div>
  <div id="finalOptions">
    <button id="replay-week">Replay</button>
    <button id="back-week-selection">Week Selection</button>
  </div>
</div>

<audio id="introSFX" src="sfx.mp3"></audio>

<footer id="siteFooter">
    <a href="https://www.youtube.com/@foopatroopaH3" target="_blank">By Foopa Troopa</a>
</footer>

<script>

const ctx = new (window.AudioContext || window.webkitAudioContext)();

function beep(freq, duration, type="square", vol=0.03) {
  const osc = ctx.createOscillator();
  const gain = ctx.createGain();
  osc.connect(gain);
  gain.connect(ctx.destination);
  osc.frequency.value = freq;
  osc.type = type;
  gain.gain.value = vol;
  osc.start();
  osc.stop(ctx.currentTime + duration/1000);
}

function successSound() { beep(600,80); setTimeout(()=>beep(900,100),100); }
function failSound() { beep(200,100,"sawtooth"); setTimeout(()=>beep(150,200,"sawtooth"),120); }
function completeSound() { beep(500,100); setTimeout(()=>beep(700,100),120); setTimeout(()=>beep(1000,150),250); }
function gameStartSound() { beep(400,80,"triangle",0.03); setTimeout(()=>beep(600,80,"triangle",0.03),100); setTimeout(()=>beep(900,120,"sawtooth",0.05),220); }
function buttonPressSound() { beep(500,50,"square",0.03); }

const introText = `
> FIELD AGENT PROTOCOL INITIATED.
> INTEL AGENT ONLINE.
> SNARK ACTIVITY DETECTED ACROSS MULTIPLE CHANNELS.
> YOUR OBJECTIVE: IDENTIFY THE AUTHENTIC POST.
> ONE IS REAL. ONE IS A DECOY. SELECT CAREFULLY.
> MISSION COMMENCING IN 3... 2... 1...
`;

const weekMissions = {
  1: [
  {A:"The crew are worms, especially the Arab ones.", B:"The crew are worms, especially the women.", real:"A", link:"https://archive.is/BcLrc", comment:'AB and Lena ("the Arab ones") have <a href="https://tiltify.com/@abstarkilla/pcrf" target="_blank">fundraised</a> over $100,000.00 for Palestine.'}, 
  {A:"Ethan only pretends to care about animals.", B:"Ethan is a zoophile.", real:"B", link:"https://archive.is/8yaki", comment:'Pretending not to know what a joke is: 1'},
  {A:"Ethan has an eating disorder because Hasan is hot.", B:"Ethan has an eating disorder because of drugs.", real:"A", link:"https://archive.is/YRalF", comment:'Hasan is Superman: 1'},
  {A:"Disappointed about no show.", B:"Happy because no show.", real:"A", link:"https://archive.is/98Kxv", comment:'He a fan, he a fan, he a fan: 1'},
  {A:"Hasan making anti-Asian comments is an old clip.", B:"Hasan making anti-Asian comments is not racist because Ethan is suing women.", real:"B", link:"https://archive.is/wip/q9vr1", comment:'Hasan is Superman: 2'},
  {A:"Ethan shares sexual degenerate content.", B:"Ethan posts misinformation.", real:"A", link:"https://archive.is/V5pAj", comment:'Drama Queens: 1'},
  {A:"BadEmpanada glazing.", B:"Hasan thirst trap.", real:"B", link:"https://archive.is/KAmZA", comment:'Hasan is Superman: 3'},
  {A:"H3 fans are dumb because the show is not funny.", B:"H3 fans are dumb because they ignore all proof against Ethan.", real:"B", link:"https://archive.is/BL6yX", comment:'These are the same guys that still completely <a href="https://archive.is/nBBPV" target="_blank">deny</a> Collargate.'},
  {A:"Compilation of Ethan sniffing.", B:"Compilation of Ethan using ChatGPT.", real:"B", link:"https://archive.is/swDgl", comment:'Pretending not to know what a joke is: 2<br>Drama Queens: 2'},
  {A:"CWHM should NOT have edited out her antisemitic remark.", B:"CWHM should edit out her antisemitic remark before Ethan sees it.", real:"A", link:"https://archive.is/ya9bN", comment:'Madison from CWHM had <a href="https://www.reddit.com/r/h3h3productions/comments/1olw4s6/you_forgot_to_edit_this_part_out_cwhm" target="_blank">stated</a> that Jews are programmed from birth with "Israeli values".'},
  {A:"The snark sub is doing a public service.", B:"The snark sub only posts when Ethan does something wrong.", real:"B", link:"https://archive.is/RPs8f", comment:'<a href="https://imgur.com/a/vI7gnSh" target="_blank">This</a> is the snark sub when H3 uploads a simple Halloween special.'},
  {A:"Ethan is inspired by Destiny.", B:"Hila is inspired by an infamous violent Israeli settler.", real:"B", link:"https://archive.is/a2AcI", comment:'We do a lil defamation: 1'},
  {A:"Ethan goes goblin mode during sex (serious).", B:"Ethan goes goblin mode during sex (meme).", real:"B", link:"https://archive.is/vimhS", comment:'He a fan, he a fan, he a fan: 2'},
  {A:"Ethan can't be a leftist because of his watch collection.", B:"Ethan pays for Tom Ward's friendship.", real:"B", link:"https://archive.is/s2MZL", comment:'Damn you, Jews: 1'},
  {A:"H3 fans are obsessively posting about CWHM (3 examples).", B:"H3 fans are obsessively posting about CWHM (10 examples).", real:"A", link:"https://archive.is/5Dgpq", comment:'Do they not get the irony: 1'},
  {A:"Oliver Tree roasting Ethan.", B:"Jeff Wittek is a Zionist because he defended Ethan.", real:"A", link:"https://archive.is/JRQYu", comment:'Oliver Tree and Ethan are <a href="https://youtu.be/BUhBaoxrj-A?si=tgQsawq5Vvfm_sk1&t=557" target="_blank">friends</a>, but they famously do an archenemies shtick. Oliver is mimicking the typical Fallen Fan. They are the butt of the joke.<br>Self-owning: 1'},
  {A:"The snark sub has nothing to do with Hasan fans.", B:"H3 fans are secretly Hasan fans.", real:"A", link:"https://archive.is/3waUW", comment:'The Community Bookmarks of the snark sub have only 5 items. One of them is a link to <a href="https://www.hasanhub.com" target="_blank">"HasanHub"</a>, a niche platform that compiles Hasan videos. His <a href="https://www.youtube.com/watch?v=V-ec_o3VUCg" target="_blank">mods</a> are snarkers.'},
  {A:"It's fine to be racist against Polish people.", B:"Hasan's comments on Polish people were not racist.", real:"A", link:"https://archive.is/rvoaT", comment:'Hasan has an extensive <a href="https://www.reddit.com/r/h3h3productions/comments/1on5vdh/compilation_of_hasan_making_racist_jokes_against" target="_blank">history</a> of expressing anti-Polish sentiments. Poles have been stereotyped as inferior, uneducated, thieves, and aggressive for centuries. This prejudice has resulted in great consequences. Hitler explicitly classified Poles as "subhuman," and millions were enslaved and murdered by Nazi Germany. Despite being their victims, they suffer to this day from the false accusations of BEING Nazis. Poles were also targeted by the USSR for ethnic and national identity, leading to executions, deportations, and cultural suppression. Poland later helped bring down the USSR, so pro-Soviet leftists still treat Poland as an ideological enemy and its population as fascists. Anti-Polish <a href="https://www.theguardian.com/society/2014/jun/11/polish-people-rise-in-attacks-blame-recession-politicians-media" target="_blank">hate crimes</a> have been on the rise for decades.'},
  {A:"The snark sub is so fun.", B:"The H3 main sub is a bad place.", real:"B", link:"https://archive.is/eXGzt", comment:'<a href="https://imgur.com/a/KrsvxMG" target="_blank">This</a> is the main sub around the same time of this post.'},
  {A:"Hila is attracted to Hasan.", B:"Hila thinks Hasan is funnier than Ethan.", real:"A", link:"https://archive.is/wip/RQS3u", comment:"Hasan is Superman: 4"},
  {A:"Hasan's pedo jokes were out of context.", B:"Hasan's pedo jokes are fine because he was younger than Ethan.", real:"B", link:'https://archive.is/FUDAM', comment:"Hasan was 22 years old at the time of the <a href=\"https://youtu.be/366UKW92b3g?si=BVFt4BUkFy_2vfu1&t=389\" target=\"_blank\">jokes</a>. That would make Ethan only 3 years older at the time of his Reddit account."},
  {A:"Teddy Glow is low quality.", B:"Teddy Glow advertisement.", real:"B", link:"https://archive.is/sbNa2", comment:'He a fan, he a fan, he a fan: 3'},
  {A:"Ethan harasses his own audience.", B:"Ethan harasses Twitter users.", real:"B", link:"https://archive.is/gygMG", comment:`These 2 accounts are self-admittedly solely dedicated to <a href="https://imgur.com/a/CVJH7jq" target="_blank">harassing</a> Ethan without limit. One of them famously wished violent death on Ethan's kids.`},
  {A:"Ethan's critics should stop engaging with him.", B:"Ethan's critics should go harder on him.", real:"A", link:"hhttps://archive.is/agAI4", comment:'Do they not get the irony: 2'},
  {A:"Ethan getting mad over accusation of drug use proves he is doing drugs.", B:"Ethan is a drug user because he admitted it himself.", real:"A", link:"https://archive.is/lzy6k", comment:'We do a lil defamation: 2'},
  {A:"Ethan is afraid of debating detractors.", B:"Ethan wants more debates to remain relevant.", real:"A", link:"https://archive.is/EAFqY", comment:'Ethan debated <a href="https://www.youtube.com/live/knMyMxXeoDY?si=BV_d-yo65HgPS0St&t=14852" target="_blank">Hasan</a> and <a href="https://www.youtube.com/live/YON4fx_vUZU?si=tl8CEqU0vrMDxabo&t=5550" target="_blank">Sam Seder</a>. Respectively, the leader of their movement and supposedly the best leftist online debater.'},
  {A:"Ethan and Hila's family in Israel should leave.", B:"Ethan and Hila's family in Israel rape Palestinians.", real:"B", link:"https://archive.is/Q4P6c", comment:'Damn you, Jews: 2'},
  {A:"Weaponizing antisemitism is a trick that Jews are taught growing up.", B:"Hila implied Palestinians are inferior.", real:"A", link:"https://archive.is/bLO3l", comment:'Damn you, Jews: 3'},
  {A:"GWAM should shut up because she's white.", B:"GWAM is a misogynist.", real:"B", link:"https://archive.is/wkkcR", comment:'GWAM is a lesbian woman who self-describes as a <a href="http://youtube.com/post/UgkxgSav-o59YMz36rhps2mT4-l0D6VwMyYI?si=ZsfTqQa4_E9MYOzj" target="_blank">radical feminist</a>.'},
  {A:"Ethan accidentally showed his doc.", B:"Ethan accidentally showed his cock.", real:"A", link:"https://archive.is/3Huy3", comment:'Drama Queens: 2'},
  {A:"Organizing to meet IRL to go to a protest.", B:"H3 fans are disgusting for caring about Ethan when there's so much happening in the world.", real:"B", link:"https://archive.is/Cp20i", comment:'Do they not get the irony: 3'},
  {A:"H3 fans harassing critic.", B:"H3 main sub breaks Reddit rules.", real:"A", link:"https://archive.is/bg5fa", comment:'Drama Queens: 3<br>Do they not get the irony: 4'},
  {A:"Ethan made a false claim in the lawsuit.", B:"Ethan made a typo in the lawsuit.", real:"A", link:"https://archive.is/B5ysQ", comment:`Ethan is not denying sending a legal letter to Noah. He is denying the claim that he took that action to silence valid criticism. It's right there on the post...`},
  {A:"Ethan mocking Trump and Michael Jackson.", B:"Ethan defending Trump and Michael Jackson.", real:"A", link:"https://archive.is/sP5ae", comment:'So, they do NOT want Trump and MJ to be made fun of?<br>Pretending not to know what a joke is: 3'},
  {A:"It's an honor to be a snarker.", B:"I DO have a job.", real:"A", link:"https://archive.is/bdyiY", comment:"Yikes."},
  {A:"USSR was good.", B:"Being leftists doesn't mean we support the USSR.", real:"A", link:"https://archive.is/fE9W0", comment:'The USSR regime caused <a href="https://en.wikipedia.org/wiki/List_of_massacres_in_the_Soviet_Union" target="_blank">more deaths</a> than the Nazis.'},
  {A:"H3 fans are Trump supporters.", B:"H3 fans are lost with Zohran's win.", real:"B", link:"https://archive.is/pujVe", comment:'<a href="https://www.reddit.com/r/h3h3productions/comments/1oosrbv/as_ethan_has_said_out_with_the_old_and_the_crazy/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button" target="_blank">What?</a>'},
  {A:"Negative obsession with Hasan ruins people's lives.", B:"Ludwig should be cancelled for betraying Hasan.", real:"A", link:"https://archive.is/7Jjgl", comment:'Do they not get the irony: 5<br>Hasan is Superman: 5'},
  {A:"Ethan lies about snarkers supporting terrorism.", B:"Hamas good.", real:"B", link:"https://archive.is/BWI7m", comment:`Terrorism and "We want to kill all Jews" aside, since they don't care, Hamas rules Gaza as an authoritarian theocratic militia. It <a href="https://www.amnesty.org/en/documents/mde21/1643/2015/en/" target="_blank">oppresses</a> its own people with censorship, kidnappings, and executions. It steals and diverts humanitarian aid for its military projects, all while its leaders live in luxury in places like Qatar.`},
  {A:"Ethan posts Islamophobic story.", B:"Ethan posts antisemitic story.", real:"A", link:"https://archive.is/4YZ93", comment:"Ethan was clearly pointing out the hypocrisy of Taylor Lorenz for sharing a post about the tragedy of 9/11 right after stating that no one cares about it."},
  {A:"Hila is ugly.", B:"Mike from PA is hot.", real:"A", link:"https://archive.is/woVwr", comment:'Talk about misogyny. Also... <a href="https://s3.amazonaws.com/thumbnails.thecrimson.com/photos/2023/08/02/102139_1364520.jpg.1500x1000_q95_crop-smart_upscale.jpg" target="_blank">bitch, please</a>.'},
  {A:"Mocking a tribute for 9/11 victims.", B:"Mocking a tribute for Oct 7th victims.", real:"B", link:"https://archive.is/Z2EHQ", comment:"Damn you, Jews: 4"},
  {A:"Hasan drinking water.", B:"Ethan picking his nose.", real:"A", link:"https://archive.is/Kxdk4", comment:"Hasan is Superman: 6"},
  {A:"Ethan is horrible for saying Israelis deserve empathy.", B:"Ethan is horrible for saying the world should help Palestine.", real:"B", link:"https://archive.is/2HFoQ", comment:`What? Maybe they're implying that Israel should do that, since they caused it. But it still doesn't make sense. Why would you want Israel to govern and make decisions on Gaza? And why is it a bad thing for multiple countries to help so that reconstruction can go quicker?`},
  {A:"Ethan uses a fallacy to dismiss the snark sub.", B:"Ethan enjoys reading snark posts.", real:"A", link:"https://archive.is/rcjyG", comment:'Ethan <a href="https://www.youtube.com/watch?v=IFd0qQo_dNc&t=3113s" target="_blank">stated</a> that there is no inherent issue with sourcing from Snark. The problem is not checking for potential malicious editing. Also, pretty funny criticism given that one of the most frequent deflections from Snark and Hasan is the conspiracy that Ethan gets clips from Destiny.<br>Do they not get the irony: 6'},
  {A:"Shock collars are not bad.", B:"Collargate is mass hallucination.", real:"B", link:"https://archive.is/zew11", comment:'Hasan is Superman: 7'},
  {A:"LSF is a Hasan snark.", B:"Snark subs are not bad.", real:"A", link:"https://archive.is/6BHod", comment:'The <a href="https://www.twitch.tv/videos/2609755897?t=06h07m51s" target="_blank">unedited footage</a> changes almost nothing. Also:<br>Do they not get the irony: 7'},
  {A:"Propaganda is a good thing.", B:"Hasan saved me from propaganda.", real:"B", link:"https://archive.is/QiM8U", comment:'<a href="https://youtu.be/2bA6Iif8-cY?si=x3YQVF1OfV5L1vzA&t=127" target="_blank">What?</a><br>Hasan is Superman: 8'}
    ]
};

let index=0, score=0, introInterval=null, introSkipped=false, currentWeek = 1, missions = [];
let userChoices = {};

function createBackgroundDots() {
  const dotsCount = 15;
  for (let i = 0; i < dotsCount; i++) {
    const dot = document.createElement('div');
    dot.className = 'pulse-dot';
    dot.style.left = `${Math.random() * 100}%`;
    dot.style.top = `${Math.random() * 100}%`;
    dot.style.animationDelay = `${Math.random() * 3}s`;
    document.body.appendChild(dot);
  }
}

createBackgroundDots();

const homePage = document.getElementById("homePage");
const homeTitle = document.getElementById("homeTitle");
const startGameBtn = document.getElementById("startGameBtn");
const externalLinkBtn = document.getElementById("externalLinkBtn");
const homeText = "Strategically Neutralizing Amoral Reactionary Kooks: Battle Response Against Insanity Network";
const introEl=document.getElementById("intro");
const gameBox=document.getElementById("gameBox");
const titleEl=document.getElementById("mission-title");
const aBtn=document.getElementById("optionA");
const bBtn=document.getElementById("optionB");
const feedback=document.getElementById("feedback");
const nextBtn=document.getElementById("next");
const openLinkBtn=document.getElementById("openLink");
const scoreEl=document.getElementById("score");
const weekSelection = document.getElementById("weekSelection");
const weekButtons = document.querySelectorAll(".week-btn");
const finalOptions = document.getElementById("finalOptions");
const commentEl = document.getElementById("comment");
const prevArrow = document.getElementById("prevArrow");

weekButtons.forEach(btn => {
  btn.addEventListener("click", () => {
    if(btn.classList.contains("disabled")) return;
    startWeek(btn.dataset.week);
  });
});

function startWeek(weekNumber) {
  currentWeek = weekNumber;
  missions = weekMissions[weekNumber];
  finalOptions.classList.add("hidden")
  weekSelection.classList.add("hidden");
  index = 0;
  score = 0;
  userChoices = {};
  feedback.textContent = "";
  const sfx = document.getElementById("introSFX");
  sfx.volume = 0.3;
  sfx.currentTime = 0;
  setTimeout(() => {
    sfx.currentTime = 0;
    sfx.play();
  }, 3000);
  intro.classList.remove("hidden");
  saveProgress();
  typeIntro(introText, startGame);
}

function typeIntro(text, callback) {
  let i=0;
  introEl.textContent="";
  introInterval=setInterval(()=>{
    introEl.textContent+=text.charAt(i);
    i++;
    if(i>=text.length){
      clearInterval(introInterval);
      introInterval=null;
      setTimeout(callback,3000);
    }
  },10);
}

function startGame() {
  const sfx = document.getElementById("introSFX");
  sfx.pause();
  sfx.currentTime = 0;
  gameStartSound();
  introEl.classList.add("hidden");
  gameBox.classList.remove("hidden");
  loadMission();
  saveProgress();
}

function loadMission() {
  const mission = missions[index];
  finalOptions.classList.add("hidden");
  
  document.querySelector(".options").style.display = "flex";
  comment.classList.remove("hidden");
  
  titleEl.textContent = `Mission ${index+1}`;
  aBtn.textContent = mission.A;
  bBtn.textContent = mission.B;
  feedback.textContent = "";
  commentEl.textContent = "";
  
  aBtn.classList.remove("user-choice", "correct-answer");
  bBtn.classList.remove("user-choice", "correct-answer");
  
  if (userChoices[index] !== undefined) {
    aBtn.disabled = true;
    bBtn.disabled = true;
    
    if (userChoices[index] === "A") {
      aBtn.classList.add("user-choice");
    } else {
      bBtn.classList.add("user-choice");
    }
    
    if (mission.real === "A") {
      aBtn.classList.add("correct-answer");
    } else {
      bBtn.classList.add("correct-answer");
    }
    
    const correct = userChoices[index] === mission.real;
    feedback.style.color = correct ? "#00ffae" : "#ff3c3c";
    feedback.textContent = correct ? "MISSION SUCCESS" : "MISSION FAILED";
    commentEl.innerHTML = mission.comment || "";
    nextBtn.style.display = "block";
    openLinkBtn.style.display = "block";
    openLinkBtn.onclick = () => window.open(mission.link, "_blank");
  } else {
    aBtn.disabled = false;
    bBtn.disabled = false;
    nextBtn.style.display = "none";
    openLinkBtn.style.display = "none";
  }
  
  if(index === missions.length-1) { 
    nextBtn.textContent = "Submit"; 
  } else { 
    nextBtn.textContent = "Next Mission"; 
  }
  
  updateNavigationArrow();
}

function updateNavigationArrow() {
  if (index > 0) {
    prevArrow.classList.remove("hidden");
  } else {
    prevArrow.classList.add("hidden");
  }
}

function handleChoice(choice){
  const mission=missions[index];
  const correct = choice===mission.real;
  
  userChoices[index] = choice;
  saveProgress(); 
  
  aBtn.classList.remove("user-choice", "correct-answer");
  bBtn.classList.remove("user-choice", "correct-answer");
  
  if (choice === "A") {
    aBtn.classList.add("user-choice");
  } else {
    bBtn.classList.add("user-choice");
  }
  
  if (mission.real === "A") {
    aBtn.classList.add("correct-answer");
  } else {
    bBtn.classList.add("correct-answer");
  }
  
  if(correct) {
    feedback.classList.add("success-animation");
    setTimeout(() => feedback.classList.remove("success-animation"), 500);
  } else {
    feedback.classList.add("failure-animation");
    setTimeout(() => feedback.classList.remove("failure-animation"), 500);
  }
  
  feedback.style.color=correct?"#00ffae":"#ff3c3c";
  feedback.textContent = correct ? "MISSION SUCCESS" : "MISSION FAILED";
  commentEl.innerHTML = mission.comment || "";
  
  if(correct) {
    score++;
    successSound();
    scoreEl.classList.add("score-change");
    setTimeout(() => scoreEl.classList.remove("score-change"), 500);
  } else {
    failSound();
  }
  
  aBtn.disabled=true; 
  bBtn.disabled=true;
  nextBtn.style.display="block";
  openLinkBtn.style.display="block";
  openLinkBtn.onclick=()=>window.open(mission.link,"_blank");
  
  updateNavigationArrow();
}

function nextMission() {
  index++;
  if(index<missions.length) loadMission();
  else showResults();
  saveProgress();
}

function prevMission() {
  if (index > 0) {
    index--;
    document.querySelector(".options").style.display = "flex";
    comment.classList.remove("hidden");
    nextBtn.style.display = "none";
    openLinkBtn.style.display = "none";
    finalOptions.classList.add("hidden");
    loadMission();
    saveProgress();
  }
}

function showResults() {
  document.querySelector(".options").style.display = "none";
  comment.classList.add("hidden");
  nextBtn.style.display = "none";
  openLinkBtn.style.display = "none";
  titleEl.textContent = "REPORT";
  const accuracy = Math.round((score/missions.length)*100);
  feedback.style.color = "#00ffae";
  feedback.innerHTML = `
    <br>MISSION COMPLETE<br><br>
    Accuracy: ${accuracy}% (${score}/${missions.length})<br><br>
  `;

  completeSound();
  finalOptions.classList.remove("hidden");
  
  updateNavigationArrow();
}

function skipIntro() {
  if(introInterval && !introSkipped){
    clearInterval(introInterval);
    introInterval=null;
    introEl.textContent=introText;
    introSkipped=true;
    setTimeout(startGame,3000);
  }
}

function resetGame() {
  index = 0;
  score = 0;
  introInterval=null; 
  introSkipped=false;
  finalOptions.classList.add("hidden");
  document.querySelector(".options").style.display = "flex";
  aBtn.disabled = false;
  bBtn.disabled = false;
  aBtn.classList.remove("user-choice", "correct-answer");
  bBtn.classList.remove("user-choice", "correct-answer");
  nextBtn.style.display = "none";
  openLinkBtn.style.display = "none";
  feedback.textContent = "";
  feedback.style.display = "block";
  comment.classList.remove("hidden");
  userChoices = {};
  clearProgress();
}

function replayGame() {
    resetGame();
    startGame();
    clearProgress();
}
function backToWeekSelection() {
    resetGame();
    gameBox.classList.add("hidden");   
    weekSelection.classList.remove("hidden");
}

function typeHomeText(text, callback) {
  let i = 0;
  homeTitle.textContent = "";
  const interval = setInterval(() => {
    homeTitle.textContent += text.charAt(i);
    i++;
    if (i >= text.length) {
      clearInterval(interval);
      setTimeout(callback);
    }
  }, 10);
}

function showHomePage() {
  homePage.classList.remove("hidden");
  gameBox.classList.add("hidden");
  weekSelection.classList.add("hidden");
  finalOptions.classList.add("hidden");

  typeHomeText(homeText);
}

function saveProgress() {
  const gameState = {
    currentWeek,
    index,
    score,
    userChoices,
    finished: index >= (missions?.length || 0),
    gameStage: getCurrentStage()
  };
  localStorage.setItem("snarkGameState", JSON.stringify(gameState));
}

function loadProgress() {
  const saved = localStorage.getItem("snarkGameState");
  if (!saved) return false;

  const gameState = JSON.parse(saved);
  currentWeek = gameState.currentWeek;
  index = gameState.index;
  score = gameState.score;
  userChoices = gameState.userChoices || {};
  const stage = gameState.gameStage;
  missions = weekMissions[currentWeek];

  if (gameState.finished) {
    homePage.classList.add("hidden");
    weekSelection.classList.add("hidden");
    introEl.classList.add("hidden");
    gameBox.classList.remove("hidden");
    showResults();
    updateNavigationArrow();
    return true;
  }

  if (stage === "playing") {
    missions = weekMissions[currentWeek];
    homePage.classList.add("hidden");
    weekSelection.classList.add("hidden");
    introEl.classList.add("hidden");
    gameBox.classList.remove("hidden");
    loadMission();
    updateNavigationArrow();
  } else if (stage === "weekSelection") {
    homePage.classList.add("hidden");
    weekSelection.classList.remove("hidden");
  } else {
    showHomePage();
  }

  return true;
}

function getCurrentStage() {
  if (!homePage.classList.contains("hidden")) return "home";
  if (!weekSelection.classList.contains("hidden")) return "weekSelection";
  if (!gameBox.classList.contains("hidden")) return "playing";
  return "home";
}

function clearProgress() {
  localStorage.removeItem("snarkGameState");
}

startGameBtn.onclick = () => {
  homePage.classList.add("hidden");
  weekSelection.classList.remove("hidden");
};

externalLinkBtn.onclick = () => {
  window.open("https://www.youtube.com/playlist?list=PL--sV4TPkuGsGi3qOow-Ik0LMqaBCotBZ", "_blank");
};

document.addEventListener("click",(e)=>{
  if(e.target.tagName==="BUTTON"){ buttonPressSound(); }
  else{ skipIntro(); }
});

aBtn.onclick = () => handleChoice("A");
bBtn.onclick = () => handleChoice("B");
nextBtn.onclick = nextMission;
prevArrow.onclick = prevMission;

document.getElementById("replay-week").onclick = replayGame;
document.getElementById("back-week-selection").onclick = backToWeekSelection;

document.getElementById("homeIcon").addEventListener("click", (e) => {
  e.preventDefault();
  buttonPressSound();
  clearProgress();
  resetGame(); 
  introEl.classList.add("hidden");
  gameBox.classList.add("hidden");
  weekSelection.classList.add("hidden");
  finalOptions.classList.add("hidden");
  showHomePage();
});


if (!loadProgress()) {
  showHomePage();
}

</script>
</body>
</html>